import init from "./../edom";
import { Data } from "front-db"

var parse = require('parse-svg-path')
var abs = require('abs-svg-path')
var normalize = require('normalize-svg-path')


let input = "M211.313,236.242,68.853.073H0L168.129,278.76h17.5ZM433.478,0H364.535L196.327,278.833H265.18ZM222.069,357.189,364.6,593.358h68.853l-168.2-278.686H247.817ZM0,593.431H68.853L237.151,314.6H168.264Z"
 
var segments = normalize(abs(parse(input)))


let s = ""
segments.forEach((e) => {
  s += e[0]
  for (let i = 1; i < e.length; i++) {
    
    s += e[i] + ","
  }
  s = s.substr(0, s.length -1)
})
console.log(s);


const c = function (query: string) {
  return document.childs(query)
}

declare let global: any;

window.addEventListener("load", () => {
  init().then(() => {
    let elem = c("#test")[0]
    let svg = c("svg")[0]
    global.elem = elem;
    console.log(elem);

    window.on("scroll", () => {
      let t = window.scrollY;
      console.log(t);
      

      guide.val = t
    });


    let guide = new Data(1000);

    
    elem.anim({translateY: 1500}, {end: 1500}, guide)
    console.log("ok");
    
    svg.animate({d: [
      "path('M211.313,236.242C211.313,236.242,68.853,0.073,68.853,0.073C68.853,0.073,0,0.073,0,0.073C0,0.073,168.129,278.76,168.129,278.76C168.129,278.76,185.629,278.76,185.629,278.76C185.629,278.76,211.313,236.242,211.313,236.242M433.478,0C433.478,0,364.535,0,364.535,0C364.535,0,196.327,278.833,196.327,278.833C196.327,278.833,265.18,278.833,265.18,278.833C265.18,278.833,433.478,0,433.478,0M222.069,357.189C222.069,357.189,364.6,593.358,364.6,593.358C364.6,593.358,433.45300000000003,593.358,433.45300000000003,593.358C433.45300000000003,593.358,265.25300000000004,314.67199999999997,265.25300000000004,314.67199999999997C265.25300000000004,314.67199999999997,247.817,314.67199999999997,247.817,314.67199999999997C247.817,314.67199999999997,222.069,357.189,222.069,357.189M0,593.431C0,593.431,68.853,593.431,68.853,593.431C68.853,593.431,237.151,314.6,237.151,314.6C237.151,314.6,168.264,314.6,168.264,314.6C168.264,314.6,0,593.431,0,593.431')",
      "path('M218.172,299.236C218.172,299.236,396.895,0,396.895,0C396.895,0,318.2,0,318.2,0C318.2,0,138.631,299.236,138.631,299.236C138.631,299.236,216.69,298.625,216.69,298.625C216.69,298.625,218.172,299.236,218.172,299.236M465.808,0C465.808,0,396.895,0,396.895,0C396.895,0,213.62,299.236,213.62,299.236C213.62,299.236,287.25,297.185,287.25,297.185C287.25,297.185,465.808,0,465.808,0M216.69,294.742C216.69,294.742,34.985,593.1,34.985,593.1C34.985,593.1,109.514,593.1,109.514,593.1C109.514,593.1,288.5,295.089,288.5,295.089C288.5,295.089,254.489,297.177,254.489,297.177C254.489,297.177,216.69,294.742,216.69,294.742M-38.127,593.1C-38.127,593.1,34.985,593.1,34.985,593.1C34.985,593.1,220.71499999999997,295.091,220.71499999999997,295.091C220.71499999999997,295.091,139.62699999999998,297.25,139.62699999999998,297.25C139.62699999999998,297.25,-38.127,593.1,-38.127,593.1')"
    ]}, {duration: 2000})
    
  })
}) 